<!DOCTYPE html>
<html lang="zh">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>点击标记弹出信息窗口</title>
</head>
<script charset="utf-8" src="https://map.qq.com/api/gljs?v=1.exp&key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77"></script>
<style type="text/css">
	html,
	body {
		height: 100%;
		margin: 0px;
		padding: 0px;
	}

	#container {
		width: 100%;
		height: 100%;
	}
</style>

<body>
	<div id="container"></div>
	<script>
		var list = [[2, 0, 2, "Endless无境剧本体验馆", "ENDLESS"], [9, 11, 2, "菜菜日麻招待所", "菜菜雀馆"], [14, 0, 3, "山东大学QQ群", "山东大学QQ群"], [7, 0, 3, "黑龙江大学QQ群", "黑龙江大学QQ群"], [12, 5, 2, "玄窝鸣人", "玄窝"], [5, 0, 3, "东北大学QQ群", "东北大学QQ群"], [18, 0, 3, "华南农业大学QQ群", "华南农业大学QQ群"], [22, 3, 1, "泸州宇华豪庭雀庄", "泸州宇华豪庭雀庄"], [29, 0, 1, "宁夏银川某据点（临时名称）", "宁夏银川某据点"], [9, 0, 3, "东南大学qq群", "东南大学qq群"], [20, 0, 1, "海南海口绅士雀庄", "绅士雀庄"], [9, 10, 0, "镇江浪速", "镇江浪速"], [18, 17, 0, "中山一番俱乐部", "一番"], [18, 0, 0, "广州魂天雀庄", "魂天雀庄"], [18, 0, 0, "广州九莲雀庄", "九莲雀庄"], [18, 5, 0, "佛山容涛雀庄", "容涛雀庄"], [9, 1, 0, "他山-日麻体验馆", "他山-日麻体验馆"], [18, 6, 0, "PIKO竞技日麻俱乐部", "PIKO竞技日麻"], [10, 1, 0, "宁波moss7俱乐部", "moss7俱乐部"], [18, 0, 0, "广州放浪雀庄", "放浪雀庄"], [26, 0, 0, "陕西自律雀庄", "自律雀庄"], [8, 11, 2, "星氷乐", "星氷乐"], [9, 4, 2, "苏州/张家港/西瓜据点 (临时据点)", "西瓜据点"], [17, 0, 1, "长沙明镜雀庄", "明镜雀庄"], [5, 0, 3, "辽宁大学QQ群", "辽宁大学QQ群"], [0, 2, 0, "北京鸭川日式麻将专门店·望京精选", "北京鸭川望京精选"], [7, 0, 3, "哈尔滨工程大学QQ群", "哈尔滨工程大学QQ群"], [8, 6, 1, "上海AllStar日麻桌游俱乐部", "ALLSTAR"], [8, 6, 1, "小狮子桌游", "小狮子桌游"], [9, 9, 2, "扬州凌生茶楼【临时据点】", "凌生茶楼"], [9, 4, 0, "苏州/常熟/幺鸡雀庄", "常熟幺鸡雀庄"], [7, 0, 0, "哈尔滨一发智竞馆", "哈尔滨一发"], [14, 15, 4, "山东菏泽QQ群", "菏泽QQ"], [9, 4, 3, "苏州大学QQ群", "苏州大学"], [0, 5, 0, "北京鸭川-牡丹园店", "北京鸭川牡丹园店"], [10, 0, 0, "杭州下沙·鸭川雀庄", "下沙鸭川"], [5, 1, 0, "大连鸭川雀庄", "大连鸭川"], [0, 2, 0, "北京鸭川-朝外SOHO店", "北京鸭川朝外SOHO店"], [23, 0, 0, "玄学麻雀部屋", "玄学"], [10, 0, 1, "自勝雀庄", "自胜"], [10, 0, 1, "见独麻雀·信义道场", "见独"], [10, 0, 1, "见独麻雀·南苑道场", "见独"], [10, 2, 0, "温州东元雀庄", "东元"], [9, 10, 0, "镇江/句容糖门日麻体验馆", "容糖门日麻"], [10, 0, 0, "杭州牌浪屋", "牌浪屋"], [16, 0, 0, "武汉夏天立直雀庄", "夏天"], [11, 15, 0, "安徽浪速·宣城国购店", "宣城浪速"], [19, 1, 0, "风子的麻将室", "风子"], [19, 3, 1, "彦纪の小屋", "彦纪"], [18, 10, 0, "惠州肆玖雀庄", "肆玖"], [18, 3, 0, "雀喵立直", "雀喵立直"], [18, 5, 0, "無双雀庄", "无双雀庄"], [18, 5, 1, "把牌打活", "把牌打活"], [12, 1, 0, "厦门魂上雀庄", "魂上"], [12, 0, 0, "福州三条雀庄", "三条"], [22, 0, 0, "好欢喜雀庄", "好欢喜"], [22, 0, 1, "朵拉雀庄", "朵拉"], [22, 1, 1, "大四喜麻将馆", "大四喜"], [22, 0, 0, "成都立直雀庄", "成都立直"], [22, 0, 1, "椿屋二次元主题桌游吧", "椿屋桌游"], [22, 0, 1, "东云研究所", "东云"], [10, 6, 0, "一帆雀庄", "一帆"], [10, 9, 0, "台州花鸟风月雀庄", "花鸟风月"], [10, 1, 0, "猎人梦境", "猎人梦境"], [0, 5, 1, "北京冷面雀庄", "冷面"], [0, 5, 0, "北京三元桌游•立直麻雀", "三元"], [21, 2, 0, "千夜雀庄", "千夜"], [0, 2, 2, "三国鼎盛茶楼大屯店", "三国"], [8, 10, 0, "查米桌游日麻体验店（浦东芳华店）", "浦东查米"], [8, 6, 0, "查米桌游日麻体验店（杨浦江浦店）", "杨浦查米"], [8, 10, 1, "柴柴日麻桌游馆", "柴柴"], [3, 0, 1, "太原凤栖立直麻将同好会", "凤栖"], [8, 8, 0, "圆橙立直麻将俱乐部", "圆橙"], [8, 4, 1, "闪亮亮日麻桌游社", "闪亮亮"], [8, 1, 0, "米花桌游日麻俱乐部", "米花"], [8, 2, 1, "隐居北斗", "北斗"], [8, 2, 1, "大好き雀庄", "大好"], [8, 7, 0, "肆季日麻桌游馆", "肆季"], [8, 4, 1, "上海唛稷日麻俱乐部", "唛稷"], [8, 2, 1, "金蝶庄园", "金蝶"], [8, 0, 0, "喵杏雀庄/上海立直麻将协会", "喵杏"], [8, 2, 1, "三笠", "三笠"], [8, 3, 0, "清澄日麻桌游俱乐部", "清澄"], [8, 3, 0, "柴猫雀庄", "柴猫"], [8, 4, 0, "浅草·日麻俱乐部", "ALLLAST"], [8, 12, 1, "ALL LAST日麻桌游体验馆", "浅草"], [8, 4, 1, "MG斗牌电竞俱乐部", "MG斗牌"], [8, 2, 1, "臣海", "臣海"], [16, 0, 0, "云岭雀庄（光谷店）", "云岭二店"], [16, 0, 0, "天缘雀庄·武汉", "天缘"], [16, 0, 0, "云岭雀庄", "云岭"], [16, 0, 1, "九月雀庄·武汉", "九月"], [16, 0, 0, "七星雀庄·武汉", "七星"], [16, 0, 1, "铁机路日麻基地", "铁机路"], [11, 0, 0, "宅天屋·合肥", "宅天屋"], [11, 0, 0, "合肥三倍满雀庄", "三倍满"], [11, 4, 1, "菠萝屋", "菠萝屋"], [5, 0, 0, "沈阳清平雀庄", "清平"], [5, 0, 0, "同福雀庄", "同福"], [5, 0, 0, "沈阳立直麻将联盟·三好店", "沈联三好店"], [5, 0, 1, "沈北春田雀庄", "春田"], [5, 0, 0, "沈阳立直麻将联盟金穗店", "沈联金穗"], [5, 11, 0, "辽宁铁岭激流俱乐部", "激流"], [5, 3, 0, "抚顺乐道立直麻将快乐屋", "乐道"], [5, 2, 0, "三元钢城馆", "三元钢城"], [5, 6, 0, "雀芯俱乐部", "雀芯"], [24, 0, 0, "昆明龍凰日麻俱乐部", "龙凰"], [24, 0, 1, "旺角", "旺角"], [13, 0, 0, "南昌浪速·四季雀庄", "浪速四季"], [17, 0, 1, "九曜雀庄", "九曜"], [15, 0, 1, "洛神雀庄", "洛神"], [18, 4, 1, "金平区据点", "金平区据点"], [8, 1, 0, "上海平和日麻桌游俱乐部", "平和"], [17, 0, 1, "长沙雁南飞立直club", "雁南飞"], [17, 0, 0, "长沙东方红智竞馆", "东方红"], [26, 0, 0, "幺玖雀庄", "幺玖"], [9, 3, 0, "常州浪速·八幡雀庄", "常州浪速"], [9, 1, 0, "无锡浪速·盼大雀庄", "无锡浪速"], [26, 0, 0, "西安天和雀庄", "天和"], [26, 0, 0, "约嘛棋牌", "约嘛"], [9, 0, 0, "南京浪速·高淳店", "浪速高淳"], [9, 0, 0, "南京浪速·江宁大学城店", "浪速江宁"], [9, 0, 0, "鲸蓝雀庄·翠屏山店", "鲸蓝"], [9, 0, 0, "南京浪速·仙林大学城店", "浪速仙林"], [9, 0, 0, "南京浪速·弘阳广场店", "浪速江北"], [9, 0, 0, "南京浪速·总店", "浪速总店"], [18, 0, 0, "广州浪速·立直雀庄", "立直浪速"], [18, 17, 0, "中山nakayama格斗日麻俱乐部", "NAKAYAMA"], [18, 6, 0, "江门御樱山雀庄", "御樱山"], [18, 0, 1, "广州岭上雀庄", "岭上雀庄"], [14, 1, 0, "青岛浪速·梓泽雀庄", "青岛浪速"], [18, 16, 0, "东莞浪速·铜雀日麻室", "浪速铜雀"], [1, 1, 0, "多来雀庄", "多来雀庄"], [1, 7, 0, "天津锦鲤雀庄", "锦鲤雀庄"], [18, 2, 1, "娜塔莉亚断幺馆", "娜塔莉亚"], [18, 2, 0, "深圳国士无双智竞馆", "国士无双"], [14, 0, 0, "济南明湖雀庄", "明湖"], [14, 0, 0, "天宇", "天宇"], [14, 0, 0, "济南麒缘雀庄", "麒缘"], [6, 0, 2, "芸锋宾馆【临时据点】", "芸锋"], [19, 0, 0, "白龍桌遊俱樂部", "白龙"], [9, 2, 0, "咸师傅接待馆", "咸师傅"], [9, 4, 0, "苏州「晓月」雀庄", "晓月"], [9, 4, 1, "柴柴日麻桌游馆（苏州店）", "苏州柴柴"], [9, 4, 0, "蕙嘉韵雀庄", "蕙嘉韵"], [9, 4, 0, "苏州浪速·寒山雀庄", "苏州浪速"]];
		var xy = [["114.506706", "38.042511"], ["120.126730", "32.508790"], ["117.060089", "36.675694"], ["126.622704", "45.708260"], ["117.621048", "24.531651"], ["123.418297", "41.765202"], ["113.353531", "23.152370"], ["105.422020", "28.916340"], ["106.192909", "38.482162"], ["118.820808", "31.887030"], ["110.317284", "20.026823"], ["119.518082", "32.173527"], ["113.360252", "22.520311"], ["113.279930", "23.082743"], ["113.501511", "23.173407"], ["113.269104", "22.754471"], ["120.301710", "31.575860"], ["113.083374", "22.617907"], ["121.557915", "29.869875"], ["113.336937", "23.132956"], ["108.944858", "34.299937"], ["121.342420", "30.741850"], ["120.515991", "31.869749"], ["112.995682", "28.167942"], ["123.405136", "41.834171"], ["116.476800", "39.997340"], ["126.661118", "45.771172"], ["121.511370", "31.304830"], ["121.516975", "31.301208"], ["119.402008", "32.368580"], ["120.771454", "31.666050"], ["126.584473", "45.697762"], ["115.473518", "35.224033"], ["120.649658", "31.302799"], ["116.375160", "39.977829"], ["120.352554", "30.313229"], ["121.584534", "38.912060"], ["116.454727", "39.919987"], ["106.671720", "26.560590"], ["120.202240", "30.208191"], ["120.148120", "30.292340"], ["120.299377", "30.410789"], ["120.685616", "27.952332"], ["119.171822", "31.925533"], ["120.157890", "30.296110"], ["114.230606", "30.589737"], ["118.755287", "30.945482"], ["109.415890", "24.337000"], ["111.283569", "23.482367"], ["114.306099", "23.026537"], ["113.514648", "22.282207"], ["113.108963", "23.027548"], ["112.918327", "23.184710"], ["118.176353", "24.476280"], ["119.291710", "26.061451"], ["104.080673", "30.662035"], ["104.069427", "30.624352"], ["104.786018", "29.315001"], ["104.069427", "30.624352"], ["104.069427", "30.624352"], ["104.032110", "30.674320"], ["120.064090", "28.900457"], ["121.369041", "28.575304"], ["121.442116", "29.859043"], ["116.353989", "39.999889"], ["116.283120", "39.916950"], ["106.513199", "29.535025"], ["116.408730", "40.006710"], ["121.553520", "31.195091"], ["121.524719", "31.266783"], ["121.511930", "31.188650"], ["112.570530", "37.894030"], ["121.410141", "31.314663"], ["121.414383", "31.236162"], ["121.425730", "31.180540"], ["121.397171", "31.213282"], ["121.406288", "31.204273"], ["121.355431", "31.157524"], ["121.434387", "31.237480"], ["121.411148", "31.219723"], ["121.487830", "31.211860"], ["121.393060", "31.200080"], ["121.093643", "31.156233"], ["121.466310", "31.266310"], ["121.426979", "31.230742"], ["121.212608", "31.039022"], ["121.436424", "31.243324"], ["121.387120", "31.205040"], ["114.399261", "30.505999"], ["114.328728", "30.578140"], ["114.353912", "30.529705"], ["114.353439", "30.525982"], ["114.294609", "30.578550"], ["114.349953", "30.601282"], ["117.203964", "31.775595"], ["117.255867", "31.829132"], ["118.498530", "31.682160"], ["123.420730", "41.791290"], ["123.459923", "41.803825"], ["123.418182", "41.760891"], ["123.417442", "41.915958"], ["123.327393", "41.772411"], ["123.847168", "42.283108"], ["123.911407", "41.868191"], ["122.991200", "41.089940"], ["121.130043", "41.144642"], ["102.714752", "25.036619"], ["102.706245", "25.042131"], ["115.881889", "28.648239"], ["112.953789", "28.219809"], ["113.681664", "34.751171"], ["116.696474", "23.356375"], ["121.406010", "31.178950"], ["112.975151", "28.192560"], ["112.976562", "28.196301"], ["108.946693", "34.315651"], ["119.954300", "31.783634"], ["120.301710", "31.575860"], ["108.962520", "34.243960"], ["108.948845", "34.218513"], ["118.900902", "31.316877"], ["118.902588", "31.912777"], ["118.784836", "31.942736"], ["118.902855", "32.086006"], ["118.722031", "32.137913"], ["118.793388", "32.040565"], ["113.317474", "23.126165"], ["113.392708", "22.533941"], ["113.083458", "22.610754"], ["113.271858", "23.094940"], ["120.402222", "36.117668"], ["113.731651", "22.982271"], ["117.220711", "39.124313"], ["117.117020", "39.097150"], ["113.924812", "22.644461"], ["114.022491", "22.529716"], ["117.123398", "36.680889"], ["117.060051", "36.682701"], ["116.990484", "36.659393"], ["125.376510", "43.871480"], ["108.390640", "22.808163"], ["117.140381", "34.255302"], ["120.649918", "31.314102"], ["120.632070", "31.304920"], ["120.719162", "31.324848"], ["120.599823", "31.312113"]];

		function initMap() {
			var geo = [];
			var bounds = new TMap.LatLngBounds();
			for (let i = 0; i < list.length; i++) {
				var p = new TMap.LatLng(xy[i][1], xy[i][0]);
				geo[i] = { // 点数组
					id: i,
					title: list[i][3],
					position: p
				};
				list[i].push(parseFloat(xy[i][0]));
				list[i].push(parseFloat(xy[i][1]));
				bounds.extend(p);
			}
			//初始化地图
			var map = new TMap.Map("container", {});

			//初始marker
			var marker = new TMap.MarkerCluster({
				id: 'cluster',
				map: map,
				minimumClusterSize: 3, // 形成聚合簇的最小个数
				geometries: geo,
				zoomOnClick: true, // 点击簇时放大至簇内点分离
				gridSize: 15, // 聚合算法的可聚合距离
				averageCenter: false, // 每个聚和簇的中心是否应该是聚类中所有标记的平均值
				maxZoom: 10 // 采用聚合策略的最大缩放级别
			});

			//初始化infoWindow
			var infoWindow = new TMap.InfoWindow({
				map: map,
				position: new TMap.LatLng(39.984104, 116.307503),
				offset: { x: -9, y: -8 },
				zIndex: 99
			});
			infoWindow.close();//初始关闭信息窗关闭
			//监听标注点击事件
			marker.on("click", function (evt) {
				//设置infoWindow
				infoWindow.open(); //打开信息窗
				infoWindow.setPosition(evt.cluster.center);//设置信息窗位置
				console.log(evt);
				infoWindow.setContent(`<div>
					<a href="#/shop/${evt.cluster.geometries[0].id}/">${evt.cluster.geometries[0].title}<a/>
					<br />
					${evt.cluster.center.toString()}
					</div>`);//设置信息窗内容
			})
			map.fitBounds(bounds, {
				padding: 30 // 自适应边距
			});
		}
		initMap();
	</script>
</body>

</html>